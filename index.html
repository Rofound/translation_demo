<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>德拓翻译</title>
    <link rel="stylesheet" href="./static/css/translation.css">
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>
    <header class="max-width">
        <div class="inner">
            <a href="http://www.datatom.com/" target="_blank    ">
                <img class="logo lp-cursor" src="./static/img/logo.svg" title="datatom">
            </a>
        </div>
    </header>
    <div class="content max-width">
        <div class="inner">
            <div class="title lp-cursor" id="title"><span tabindex="0">翻译</span></div>
            <div class="hr max-width min-width"></div>
            <div class="main">
                <form action="#" method="get">
                    <div class="langs max-width lp-flex min-width" id="langs">
                        <!-- Original language -->
                        <div class="half-division lang-left lp-flex lp-flex-right " id="lang-left" tabindex="0">
                            <div class="lang-btn lp-inline-block lp-flex lp-flex-center standard-btn standard-btn-checked lp-radius-collapse-left lp-clear-right-border lang-btn-group-right-border" tabindex="0" style="-moz-user-select: none;">葡萄牙语</div>
                            <div class="lang-btn lp-inline-block lp-flex lp-flex-center standard-btn standard-btn-nofocus lp-clear-right-border lang-btn-group-right-border" tabindex="0">中文</div>
                            <div class="lang-btn lp-inline-block lp-flex lp-flex-center standard-btn standard-btn-nofocus lp-clear-right-border lang-btn-group-right-border" tabindex="0">德语</div>
                            <div class="lang-btn lp-inline-block lp-flex lp-flex-center standard-btn standard-btn-nofocus lang-btn-group-right-border lp-clear-right-border" tabindex="0">检测语言</div>
                            <div class="original lang-select-btn lang-btn lp-flex lp-flex-center standard-btn lp-radius-collapse-right standard-select-btn-nofocus" tabindex="0">
                                <div class="arrow-dropdown"></div>
                            </div>
                            <div style="" class="lang-switch lp-flex-inline lp-flex-right outline-none" tabindex="0">
                                <div class="switch lang-select-btn lang-btn lp-flex lp-flex-center standard-btn lp-radius-collapse standard-select-btn-nofocus" tabindex="0">
                                    <!--<img src="./static/img/switch_camera.svg" alt="<=>" title="转换">-->
                                    <span class="fa fa-exchange lp-24px lp-color-theme"></span>
                                </div>
                            </div>
                        </div>
                        <!-- Destination language -->
                        <div class="half-division lang-right lp-flex lp-flex-left" id="lang-right">
                            <div class="lang-btn lp-inline-block lp-flex lp-flex-center standard-btn standard-btn-checked lp-radius-collapse-left lp-clear-right-border lang-btn-group-right-border" tabindex="0">中文</div>
                            <div class="lang-btn lp-inline-block lp-flex lp-flex-center standard-btn standard-btn-nofocus lp-clear-right-border lang-btn-group-right-border" tabindex="0">葡萄牙语</div>
                            <div class="lang-btn lp-inline-block lp-flex lp-flex-center standard-btn standard-btn-nofocus lp-clear-right-border lang-btn-group-right-border" tabindex="0">葡萄牙语</div>
                            <div class="lang-btn lp-inline-block lp-flex lp-flex-center standard-btn standard-btn-nofocus lang-btn-group-right-border lp-clear-right-border" tabindex="0">德语</div>
                            <div class="destination lang-select-btn lang-btn lp-flex lp-flex-center standard-btn lp-radius-collapse-right standard-select-btn-nofocus" tabindex="0">
                                <div class="arrow-dropdown"></div>
                            </div>
                            <div class="lang-translation lp-flex-inline ">
                                <div class="lang-select-btn lang-btn lp-flex lp-flex-center lp-radius-collapse standard-select-btn-nofocus" tabindex="0">
                                    翻译
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="langIO" class="lang-io lp-flex min-width">
                        <div id="srcDivision" class="half-division lang-left lp-flex readable">
                            <label for="translationInput">被翻译前的文字</label>
                            <textarea name="original" id="translationInput" spellcheck="false">day</textarea>
                            <div id="translationInputClear" class="lang-clear lp-cursor">
                                <i class="fa fa-times"></i>
                            </div>
                        </div>
                        <div id="destDivision" class="half-division lang-right lp-flex readable">
                            <label for="translationOutput">被翻译后的文字</label>
                            <textarea name="destination" id="translationOutput" spellcheck="false" readonly="readonly">天</textarea>
                            <div id="translationOutputCopyToClipboard" class="lang-clear lp-cursor">
                                <i class="fa fa-clipboard"></i>
                            </div>
                        </div>
                    </div>
                    <div id="translitDivision" class="lp-flex min-width">
                        <div id="srcTranslit"  class="half-division src-translit-wrap lp-flex lp-flex-left">
                            translit```
                        </div>
                        <div id="destTranslit"  class="half-division dest-translit-wrap lp-flex lp-flex-left lang-right">
                            translit```
                        </div>
                    </div>
                    <div id="translationsDisvision" class="lp-flex min-width">
                        <div class="lp-flex lp-flex-column half-division defindeDivision">
                            <div id="srcDefine">
                                <h4><span>day</span>的定义</h4>
                                <h5>名词</h5>
                                <div class="srcDefineDivision">
                                    <p>a period of twenty-four hours as a unit of time, reckoned from one midnight to the next, corresponding to a rotation of the earth on its axis.</p>
                                    <q>There ought to be twenty-nine days in every month, not just leap year Februaries.</q>
                                    <em class="Synonyms">同义词: <span>a twenty-four-hour period, twenty-four hours</span></em>
                                </div>
                                <div class="srcDefineDivision">
                                    <p>a period of twenty-four hours as a unit of time, reckoned from one midnight to the next, corresponding to a rotation of the earth on its axis.</p>
                                    <q>There ought to be twenty-nine days in every month, not just leap year Februaries.</q>
                                    <em class="Synonyms">同义词: <span>a twenty-four-hour period, twenty-four hours</span></em>
                                </div>
                            </div>
                            <div class="SynonymsDivision">
                                <h4>同义词</h4>
                                <h5>名词</h5>
                                <ul>
                                    <li><span>confidential, top secret, classified, undisclosed, unknown, private, under wraps, hush-hush, sub rosa</span></li>
                                    <li>hidden, concealed, disguised, invisible</li>
                                    <li>clandestine, covert, undercover, underground, surreptitious, stealthy, furtive, cloak-and-dagger, hole-and-corner, closet, hush-hush
                                    </li>
                                    <li>cryptic, encoded, coded, mysterious, abstruse, recondite, arcane, esoteric, Kabbalistic
                                    </li>
                                    <li>secluded, private, concealed, hidden, unfrequented, out of the way, tucked away
                                    </li>
                                    <li>private</li>
                                    <li>secluded, privy
                                    </li>
                                </ul>
                            </div>
                            <div class="exampleDivision">
                                <h4>示例</h4>
                                <h5></h5>
                                <ol>
                                    <li><span>Maybe this strange talisman contained his secret to the mysteries of life.</span></li>
                                    <li>hidden, concealed, disguised, invisible</li>
                                    <li>clandestine, covert, undercover, underground, surreptitious, stealthy, furtive, cloak-and-dagger, hole-and-corner, closet, hush-hush
                                    </li>
                                    <li>cryptic, encoded, coded, mysterious, abstruse, recondite, arcane, esoteric, Kabbalistic
                                    </li>
                                    <li>secluded, private, concealed, hidden, unfrequented, out of the way, tucked away
                                    </li>
                                    <li>private</li>
                                    <li>secluded, privy
                                    </li>
                                </ol>
                            </div>
                            <div class="seemoreDivision">
                                <h4>另请参阅</h4>
                                <p>top secret, secret admirer, secret agent, secret love, trade secret, keep a secret, keep secret, secret code, in secret, secret service</p>
                            </div>
                        </div>
                        <div id="srcTranslation"  class="lp-flex lp-flex-column half-division lang-right">
                            <h4><span>day</span>的翻译</h4>
                            <em>名词</em>
                            <div class="face-lists">
                                <div class="item">
                                    <div class="colorbar lp-inline-block"></div>
                                    <div class="translation-text lp-inline-block">dest-text</div>
                                    <div class="src-translations lp-inline-block">src-texts</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="srcLangsControlPanel">srcLangsControlPanel</div>
                    <div id="destLangsControlPanel">destLangsControlPanel</div>
                    <!--
                    TODO.
                    <div class="history-wrap lp-flex">
                        history-wrap```
                    </div>
                    -->
                </form>
            </div>
        </div>
    </div>
    <!-- TODO. -->
    <div style="margin: 800px 0 0 0;"></div>
    <footer class="max-width">
        <div class="inner">
            2018- © <a href="http://www.datatom.com/" title="datatom" target="_blank">Datatom</a> Corp.
        </div>
    </footer>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/clipboard.js/1.7.1/clipboard.min.js"></script>
    <script src="./static/js/polyfill/MDN.js"></script>
    <script>
        // Only one variable
        let lpModule = {};
        // Enum
        const Enum = {
            // Save some different selector name, but it is, too.
            // Class name
            LANG_BTN_CHECKED : "standard-btn-checked",
            LANG_BTN_NOFOCUS : "standard-btn-nofocus",
            LANG_BTN : "standard-btn",
            LANG_SELECT_BTN_NOFOCUS : "standard-select-btn-nofocus",
            LANG_SELECT_BTN_CHECKED : "standard-select-btn-checked",
            // Selector name
            LANG_BTN_RIGHT_SELECTOR : "div.lang-right div",
            LANG_BTN_LEFT_SELECTOR : "div.lang-left div",
            LANG_OF_ORIGINAL_SELECT_SELECTOR : ".original.lang-select-btn",
            LANG_OF_DESTINATION_SELECT_SELECTOR : ".destination.lang-select-btn",
            LANG_OF_SOURCE_DIV_SELECTOR : "#langIO>.lang-left.lp-flex",
            LANG_INPUT_CLEAR : "#translationInputClear",
            LANG_INPUT_TEXTAREA : "#translationInput",
            LANG_OUTPUT_TEXTAREA : "#translationOutput",
            LANG_OUTPUT_COPY_TO_CLIPBOARD : "#translationOutputCopyToClipboard",
            // Event name
            CLICK : "click",
            FOCUS : "focus",
            BLUR : "blur",
            MOUSEOVER : "mouseover",
            MOUSEOUT : "mouseout",
            SCCUESS : "success",
            ERROR : "error",
        };
        // Dom object tree cache
        lpModule.$window = {
            $ : $(window),
            $document : $(document),
            $body : $(document.body),
            $langs : $("#langs"),
            $langLeft : $("#lang-left"),
            $langIOLeft : $(Enum.LANG_OF_SOURCE_DIV_SELECTOR),
            $langInput: $(Enum.LANG_INPUT_TEXTAREA),
            $langOutput: $(Enum.LANG_OUTPUT_TEXTAREA),
        };
        // Record
        const record = {
            langBtnLeftChooice : ".lang-left :first",
            langBtnRightChooice : ".lang-right :first",
        };
        // Copy to the clipboard
        lpModule.Clipboard = function(selectorName, originalContent){
            let _clipboard = new Clipboard(selectorName, {
                text: function(){
                    return originalContent;
                }
            });
            _clipboard.on(Enum.SCCUESS, function(e){
                console.log("Copy to clipboard: ", Enum.SCCUESS, "\n ", e);
            });
            _clipboard.on(Enum.ERROR, function(e){
                console.log("Copy to clipboard: ", Enum.ERROR, "\n ", e);
            });
        };
        lpModule.Clipboard(Enum.LANG_OUTPUT_COPY_TO_CLIPBOARD, lpModule.$window.$langOutput.val());
        for(let i = 0,
                eventMaps = [
                    { selectorName: Enum.LANG_BTN_LEFT_SELECTOR, eventName: Enum.CLICK},
                    { selectorName: Enum.LANG_BTN_RIGHT_SELECTOR, eventName: Enum.CLICK},
                    { selectorName: Enum.LANG_OF_ORIGINAL_SELECT_SELECTOR, eventName: Enum.CLICK},
                    { selectorName: Enum.LANG_OF_ORIGINAL_SELECT_SELECTOR, eventName: Enum.BLUR},
                    { selectorName: Enum.LANG_OF_DESTINATION_SELECT_SELECTOR, eventName: Enum.CLICK},
                    { selectorName: Enum.LANG_OF_DESTINATION_SELECT_SELECTOR, eventName: Enum.BLUR},
                    { selectorName: Enum.LANG_INPUT_CLEAR, eventName: Enum.CLICK},

                    { selectorName: Enum.LANG_OUTPUT_COPY_TO_CLIPBOARD, eventName: Enum.CLICK},

                    { selectorName: Enum.LANG_INPUT_TEXTAREA, eventName: Enum.CLICK},
                    { selectorName: Enum.LANG_INPUT_TEXTAREA, eventName: Enum.MOUSEOVER},
                    // source division event start
                    { selectorName: Enum.LANG_OF_SOURCE_DIV_SELECTOR, eventName: Enum.BLUR},
                    { selectorName: Enum.LANG_OF_SOURCE_DIV_SELECTOR, eventName: Enum.FOCUS},
                    // source division event end

                ],
                toggleBtnFn = function(e, a, b){
                    if(e.hasClass(a)) {
                        e.addClass(b)
                            .removeClass(a);
                    }
                    else {
                        e.removeClass(b)
                            .addClass(a);
                    }
                },
                length = eventMaps.length; i < length; i++)
        {
            (function(p){
                lpModule.$window.$body.on(eventMaps[p].eventName, eventMaps[p].selectorName, function(e){
                    // Cache
                    var $this = $(this);
                    switch (eventMaps[p].selectorName) {
                    // switch (Object.keys(selectors)[p]) {
                        case Enum.LANG_BTN_RIGHT_SELECTOR:
                            if($this.hasClass(Enum.LANG_BTN_NOFOCUS)) {
                                $this.addClass(Enum.LANG_BTN_CHECKED)
                                    .removeClass(Enum.LANG_BTN_NOFOCUS);

                                $(record.langBtnRightChooice)
                                    .removeClass(Enum.LANG_BTN_CHECKED)
                                    .addClass(Enum.LANG_BTN_NOFOCUS);

                                record.langBtnRightChooice = $this;
                            }
                            break;
                        case Enum.LANG_BTN_LEFT_SELECTOR:
                            if($this.hasClass(Enum.LANG_BTN_NOFOCUS)) {
                                $this.addClass(Enum.LANG_BTN_CHECKED)
                                    .removeClass(Enum.LANG_BTN_NOFOCUS);

                                $(record.langBtnLeftChooice).removeClass(Enum.LANG_BTN_CHECKED)
                                    .addClass(Enum.LANG_BTN_NOFOCUS);

                                record.langBtnLeftChooice = $this;
                            }
                            break;
                        case Enum.LANG_OF_ORIGINAL_SELECT_SELECTOR:
                            // Toggle
                            toggleBtnFn($this, Enum.LANG_SELECT_BTN_NOFOCUS, Enum.LANG_SELECT_BTN_CHECKED);
                            if(eventMaps[p].eventName === Enum.BLUR){
                                $this.removeClass(Enum.LANG_SELECT_BTN_CHECKED).addClass(Enum.LANG_SELECT_BTN_NOFOCUS);
                            }
                            console.info($this);
                            break;
                        case Enum.LANG_OF_DESTINATION_SELECT_SELECTOR:
                            // Toggle
                            toggleBtnFn($this, Enum.LANG_SELECT_BTN_NOFOCUS, Enum.LANG_SELECT_BTN_CHECKED);
                            if(eventMaps[p].eventName === Enum.BLUR){
                                $this.removeClass(Enum.LANG_SELECT_BTN_CHECKED).addClass(Enum.LANG_SELECT_BTN_NOFOCUS);
                            }
                            console.info($this);
                            break;
                        case Enum.LANG_OF_SOURCE_DIV_SELECTOR:
                            // Toggle outline
                            eventMaps[p].eventName === Enum.FOCUS?
                                $this.addClass(Enum.FOCUS):
                                0;
                            eventMaps[p].eventName === Enum.BLUR?
                                $this.removeClass(Enum.FOCUS):
                                0;
                            console.info($this);
                            break;
                        case Enum.LANG_INPUT_CLEAR:
                            if(eventMaps[p].eventName === Enum.CLICK){
                                // Clear original input text area content
                                lpModule.$window.$langInput.val("");
                                lpModule.$window.$langIOLeft.addClass(Enum.FOCUS);
                            }
                            else if(eventMaps[p].eventName === Enum.MOUSEOVER){
                                $this.addClass(Enum.LANG_BTN)
                            }
                            break;
                    }
                })
            })(i);
        }
        // The text area plugin
        jQuery.fn.extend({
            autoHeight: function(){
                return this.each(function(){
                    var $this = jQuery(this);
                    if( !$this.attr('_initAdjustHeight') ){
                        $this.attr('_initAdjustHeight', $this.outerHeight());
                    }
                    _adjustH(this).on('input', function(){
                        _adjustH(this);
                    });
                });
                /**
                 * 重置高度
                 * @param {Object} elem
                 */
                function _adjustH(elem){
                    var $obj = jQuery(elem);
                    return $obj.css({height: $obj.attr('_initAdjustHeight'), 'overflow-y': 'hidden'})
                        .height( elem.scrollHeight );
                }
            }
        });
        // Do textarea of font length
        lpModule.$window.$document.on("keydown", ".lang-left>textarea", function(e){
        });
        $(function(){
            // Make textarea auto height
            $("#translationInput").autoHeight();
            $("#translationOutput").autoHeight();
        })
    </script>
</body>
</html>